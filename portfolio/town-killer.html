<!DOCTYPE html>
<html>
  <head></head>
  <!-- ------------------------------->
  <!-- Website developed by Eduard Kachan-->
  <!-- Preprocessors used are Jade and Stylius-->
  <!-- ------------------------------->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Eduard Kachan | Portfolio | Townies & killer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, minimal-ui">
  <link rel="stylesheet" href="../assets/styles/prism.css" type="text/css">
  <link rel="stylesheet" href="../assets/styles/styles.css" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Lato:400,700,900" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Noto+Serif:400" rel="stylesheet" type="text/css">
  <link href="http://fonts.googleapis.com/css?family=Noto+Sans:400,700" rel="stylesheet" type="text/css">
  <link rel="icon" href="../assets/images/favicon.ico" type="image/x-icon">
  <!-- ------------------------------->
  <!-- Body-->
  <!-- ------------------------------->
  <body>
    <div class="wrapper">
      <aside id="sideBar">
        <h1><a href="../index.html">Eduard Kachan</a></h1>
        <nav><a href="../index.html">Articles</a><br><a href="../portfolio.html" class="current">Portfolio</a><br><a href="../about.html">About</a></nav>
        <!--form(role="search" method="get" class="search-form" action="")-->
        <!--   label-->
        <!--      span(class="screen-reader-text")-->
        <!--      input(type="search" class="search-field" placeholder="Search" value="" name="s" title="")-->
        <!--   input(type="submit" class="search-submit" value="")-->
        <!--h2 Categories-->
        <!---->
        <!--ul.categories-->
        <!--   li-->
        <!--      a(href="#") JavaScript (12)-->
        <!--   li-->
        <!--      a(href="#") HTML5/CSS (32)-->
        <!--   li-->
        <!--      a(href="#") AngularJS (13)-->
        <!--   li-->
        <!--      a(href="#") PHP (642)-->
        <!--   li-->
        <!--      a(href="#") Laravel (2)-->
        <ul class="socialMedia">
          <li><a href="https://twitter.com/EdVAardian" target="_blank" class="twitter"></a></li>
          <li><a href="https://github.com/Eduard-Kachan" target="_blank" class="github"></a></li>
          <li><a href="https://www.linkedin.com/in/eduardkachan" target="_blank" class="linkedin"></a></li>
        </ul>
      </aside>
      <section class="work">
        <div class="container">
          <div class="mobileHeader">
            <button id="menu" class="menu">Menu</button>
            <h1><a href="index.html">Eduard Kachan</a></h1>
          </div>
          <header><a href="../portfolio.html">
              <h2>Portfolio</h2></a></header><img src="../assets/images/town-killer-hero.jpg" class="projectBanner">
          <!-- ------------------------------->
          <!-- Content-->
          <!-- ------------------------------->
          <article>
            <header>
              <h1>Townies & killer</h1><a href="https://github.com/Eduard-Kachan/Townies-And-Killer" target="_blank" class="more">Visit GitHub &#8594;</a>
            </header>
            <p>This project was a learning experience for Node, Express, and Sockets.io. For the most part I now know how use Node and have it as the server. The rerouting is also very interesting, I am able to create something dynamically that does not even exist, and I think that this is awesome. The best part is also sockets, where users can communicate with the server and with other users.  The idea for this project was Town Of Salem game. It’s not as graphically same and does not have the same complexity, but the main game mechanic is there.</p>
            <h2>server.js</h2>
            <p>After installing Node and being able to run it I think the next most important part is to organize the server.js file. Being able to separate code can create a great cohesion in the project, so what I ended up doing is separating my routs, socket connection and my objects into different files. This is how I did it:</p>
            <pre class="language-javascript javascript"><code>// Have this in the server.js
var socket = require('./game/socket');

// Create a designated folder in the root of the project, mine is game.

// In that folder a file will exist called socket.js
// In this file add the desired function to the exports
exports.startConnection = function (io) {
   io.on('connection', function(socket) {
      // Desired code is here ...
   });
};

// Back in server.js use the method
socket.startConnection(io);
</code></pre>
            <h2>Custom URL</h2>
            <p>For this game I had an idea of allowing user to create rooms with there own URL names. It was a tough task at the beginning but later it became very simple and a neat trick.</p>
            <pre class="language-javascript javascript"><code>// Any Room Page
express.get('/room/*', function(req, res){
   res.sendFile(__dirname + '/public/room.html');
});
</code></pre>
            <p>The idea is very simple, that user can type anything after “room/” and what they have tipped becomes the room name. Of course they are given the same page every time, but now thanks to sockets I can link them to a specific room and more people can join.</p>
            <p>Also regarding routing, I have express.use() and it looks for “/assets/” and returns a correct route which is “__dirname + '/public/assets/”. It took me awhile to understand this but in order for this to work any file that is trying to access the assets need to start from the root of the package.</p>
            <h2>socket.io and Room object</h2>
            <p>I had to create a room object that would be responsible for one room and obviously I am able to create more rooms. The sockets had the role of creating a connection between the user and the server. I was able to emit to all socket in the room by creating a separate function that looped through all and emitted to each separately. To the addition of messaging each other the users are also able to change their name. In the game users are also able to do a collective vote against a user and the highest vote wins. The day and night cycle changes at a constant rate.</p>
          </article>
        </div>
      </section>
    </div>
    <!-- ------------------------------->
    <!-- Scripts-->
    <!-- ------------------------------->
    <script type="text/javascript" src="../assets/scripts/prism.js"></script>
    <script type="text/javascript" src="assets/scripts/main.js"></script>
  </body>
</html>